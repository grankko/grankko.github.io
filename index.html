<html>
    <head>
        <title>Is Anton rekt or not?</title>
        <link href="styles/css/fonts.css" rel="stylesheet">
        <link href="styles/css/site.css" rel="stylesheet">
    </head>
    <body>
        <script type="application/javascript">
            var formatter = new Intl.NumberFormat('sv-SE', {
                style: 'currency',
                currency: 'SEK',
                });

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                
                    var result = JSON.parse(xhttp.response);
                    var antonsPriceInSek = formatter.format(result.ethereum.sek * 0.07);
                    var pizzaPriceInSek = formatter.format(result.bitcoin.sek * 10000);

                    document.getElementById("antonPrice").innerHTML = antonsPriceInSek;
                    document.getElementById("pizzaPrice").innerHTML = pizzaPriceInSek;
                }
            }

            window.setInterval(function() {
                callCoinGecko();
            }, 45*1000);

            function callCoinGecko() {
                xhttp.open("GET", "https://api.coingecko.com/api/v3/simple/price?ids=ethereum,bitcoin&vs_currencies=sek", true);
                xhttp.send();
            }

            callCoinGecko();

        </script>
        <div class="content">
            <p>
                Anton paid <span class="price" id="antonPrice">...</span> for three nights in SÃ¤fsen in 2021.
            </p>
            <p>
                ..no worries though, in 2010 a guy bought two pizzas for <span class="price" id="pizzaPrice">...</span>.
            </p>
        </div>
    </body>
</html>